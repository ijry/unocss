import{i as g,e as m,M as d}from"./index-DiOdfLr0.js";function R(e,n,r){if(e==="")return;const t=e.length;let o=0,c=!1,s=0;for(let i=0;i<t;i++)switch(e[i]){case n:c||(c=!0,s=i),o++;break;case r:if(--o,o<0)return;if(o===0)return[e.slice(s,i+1),e.slice(i+1),e.slice(0,s)];break}}function y(e,n,r,t){if(e===""||(g(t)&&(t=[t]),t.length===0))return;const o=e.length;let c=0;for(let s=0;s<o;s++)switch(e[s]){case n:c++;break;case r:if(--c<0)return;break;default:for(const i of t){const l=i.length;if(l&&i===e.slice(s,s+l)&&c===0)return s===0||s===o-l?void 0:[e.slice(0,s),e.slice(s+l)]}}return[e,""]}function a(e,n,r){r=r??10;const t=[];let o=0;for(;e!=="";){if(++o>r)return;const c=y(e,"(",")",n);if(!c)return;const[s,i]=c;t.push(s),e=i}if(t.length>0)return t}const u=["hsl","hsla","hwb","lab","lch","oklab","oklch","rgb","rgba"],p=["%alpha","<alpha-value>"],b=new RegExp(p.map(e=>m(e)).join("|"));function T(e=""){const n=f(e);if(n!=null){const{components:r,alpha:t}=n;return t==null?r:[...r,t]}}function C(e=""){const n=w(e);if(n==null||n===!1)return;const{type:r,components:t,alpha:o}=n,c=r.toLowerCase();if(t.length!==0&&!(u.includes(c)&&![1,3].includes(t.length)))return{type:c,components:t.map(s=>typeof s=="string"?s.trim():s),alpha:typeof o=="string"?o.trim():o}}function M(e){const n=e.alpha??1;return typeof n=="string"&&p.includes(n)?1:n}function $(e,n){if(typeof e=="string")return e.replace(b,`${n??1}`);const{components:r}=e;let{alpha:t,type:o}=e;return t=n??t,o=o.toLowerCase(),["hsla","rgba"].includes(o)?`${o}(${r.join(", ")}${t==null?"":`, ${t}`})`:(t=t==null?"":` / ${t}`,u.includes(o)?`${o}(${r.join(" ")}${t})`:`color(${o} ${r.join(" ")}${t})`)}function w(e){if(!e)return;let n=f(e);if(n!=null||(n=S(e),n!=null)||(n=x(e),n!=null)||(n=F(e),n!=null)||(n=j(e),n!=null))return n}function f(e){const[,n]=e.match(/^#([\da-f]+)$/i)||[];if(n)switch(n.length){case 3:case 4:const r=Array.from(n,o=>Number.parseInt(o,16)).map(o=>o<<4|o);return{type:"rgb",components:r.slice(0,3),alpha:n.length===3?void 0:Math.round(r[3]/255*100)/100};case 6:case 8:const t=Number.parseInt(n,16);return{type:"rgb",components:n.length===6?[t>>16&255,t>>8&255,t&255]:[t>>24&255,t>>16&255,t>>8&255],alpha:n.length===6?void 0:Math.round((t&255)/255*100)/100}}}function S(e){const n={rebeccapurple:[102,51,153,1]}[e];if(n!=null)return{type:"rgb",components:n.slice(0,3),alpha:n[3]}}function x(e){const n=e.match(/^(rgb|rgba|hsl|hsla)\((.+)\)$/i);if(!n)return;const[,r,t]=n,o=a(t,",",5);if(o){if([3,4].includes(o.length))return{type:r,components:o.slice(0,3),alpha:o[3]};if(o.length!==1)return!1}}const k=new RegExp(`^(${u.join("|")})\\((.+)\\)$`,"i");function F(e){const n=e.match(k);if(!n)return;const[,r,t]=n,o=h(`${r} ${t}`);if(o){const{alpha:c,components:[s,...i]}=o;return{type:s,components:i,alpha:c}}}function j(e){const n=e.match(/^color\((.+)\)$/);if(!n)return;const r=h(n[1]);if(r){const{alpha:t,components:[o,...c]}=r;return{type:o,components:c,alpha:t}}}function h(e){const n=a(e," ");if(!n)return;let r=n.length;if(n[r-2]==="/")return{components:n.slice(0,r-2),alpha:n[r-1]};if(n[r-2]!=null&&(n[r-2].endsWith("/")||n[r-1].startsWith("/"))){const c=n.splice(r-2);n.push(c.join(" ")),--r}const t=a(n[r-1],"/",2);if(!t)return;if(t.length===1||t[t.length-1]==="")return{components:n};const o=t.pop();return n[r-1]=t.join("/"),{components:n,alpha:o}}const v=/theme\(\s*(['"])?(.*?)\1?\s*\)/g;function L(e){return e.includes("theme(")&&e.includes(")")}function P(e,n,r=!0){const t=Array.from(e.toString().matchAll(v));if(!t.length)return e;const o=new d(e);for(const c of t){const s=c[2];if(!s)throw new Error("theme() expect exact one argument, but got 0");const i=E(s,n,r);i&&o.overwrite(c.index,c.index+c[0].length,i)}return o.toString()}function E(e,n,r=!0){const[t,o]=e.split("/");let s=t.trim().split(".").reduce((i,l)=>i==null?void 0:i[l],n);if(typeof s=="string"){if(o){const i=C(s);i&&(s=$(i,o))}return s}else if(r)throw new Error(`theme of "${e}" did not found`)}export{M as a,a as b,$ as c,R as d,P as e,T as f,y as g,L as h,v as i,C as p,E as t};
